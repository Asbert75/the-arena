(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,a,t){e.exports=t(52)},25:function(e,a,t){},31:function(e,a,t){},33:function(e,a,t){},35:function(e,a,t){},37:function(e,a,t){},39:function(e,a,t){},41:function(e,a,t){},43:function(e,a,t){},45:function(e,a,t){},47:function(e,a,t){},52:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(18),i=t.n(s),c=(t(25),t(1)),l=t(2),o=t(5),m=t(3),h=t(6),u=t(4),d=(t(31),function(e,a){return{type:"LOAD_CHARACTER",character:e,cached:a}}),p=function(){return{type:"SET_ACCOUNT_ID",accountId:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}},f=function(e){function a(){return Object(c.a)(this,a),Object(o.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"navigation"},n.a.createElement("img",{className:"logo",src:"/images/arena2.png",alt:""}),n.a.createElement("ul",null,n.a.createElement("li",{className:this.props.navigation.showCharacterCreation?"active":null},n.a.createElement("button",{onClick:function(){return e.props.dispatch({type:"SHOW_CHARACTER_CREATION"})}},"Characters")),n.a.createElement("li",{className:this.props.navigation.showCharacter?"active":null},n.a.createElement("button",{onClick:function(){return e.props.dispatch({type:"SHOW_CHARACTER"})},disabled:null===this.props.characterClass},"My Character")),n.a.createElement("li",{className:this.props.navigation.showArena?"active":null},n.a.createElement("button",{onClick:function(){return e.props.dispatch({type:"SHOW_ARENA"})},disabled:null===this.props.characterClass},"Into The Arena")),n.a.createElement("li",{className:this.props.navigation.showStore?"active":null},n.a.createElement("button",{onClick:function(){return e.props.dispatch({type:"SHOW_STORE"})},disabled:null===this.props.characterClass},"Store")),n.a.createElement("li",{className:this.props.navigation.showCredits?"active":null},n.a.createElement("button",{onClick:function(){return e.props.dispatch({type:"SHOW_CREDITS"})}},"Credits"))))}}]),a}(r.Component),g=Object(u.b)(function(e){return{navigation:e.navigation,characterClass:e.character.class}})(f),v=(t(33),t(11)),E=(t(35),[{id:0,name:"Attack",icon:"icons/spells/attack.png",description:"Attack your enemy for [d] damage.",secondaryDescription:"Also restores 10% of your maximum resources.",resourceCost:0,baseDamage:15,baseHealing:0,rank:1,rankModifier:[1,2,3]},{id:1,name:"Heal",icon:"icons/spells/heal.png",description:"Cast a heal on yourself, restoring [h] health points.",secondaryDescription:null,resourceCost:15,baseDamage:0,baseHealing:30,rank:1,rankModifier:[1,2,3.5]},{id:2,name:"Charged Arrow",icon:"icons/spells/charged_arrow.png",description:"Launches a charged arrow at your enemy, dealing [d] damage.",secondaryDescription:null,resourceCost:30,baseDamage:35,baseHealing:0,rank:1,rankModifier:[1,1.5,2.5]},{id:3,name:"Piercing Shot",icon:"icons/spells/piercing_shot.png",description:"An extremely strong arrow pierces your enemy, instantly dealing [d] damage.",secondaryDescription:"Has a 20% chance to deal 100% increased damage.",resourceCost:10,baseDamage:25,baseHealing:0,rank:1,rankModifier:[1,1.5,2.15]},{id:4,name:"Quick Strike",icon:"icons/spells/quick_strike.png",description:"A quick attack that deals [d] damage.",secondaryDescription:"Has a 20% chance to deal 100% increased damage.",resourceCost:10,baseDamage:20,baseHealing:0,rank:1,rankModifier:[1,2.1,3.15]},{id:5,name:"Skull Bash",icon:"icons/spells/skull_bash.png",description:"A brutal slam that deals [d] damage.",secondaryDescription:null,resourceCost:35,baseDamage:30,baseHealing:0,rank:1,rankModifier:[1,2,2.95]},{id:6,name:"Ambush",icon:"icons/spells/ambush.png",description:"Stab your target from behind, dealing [d] damage.",secondaryDescription:"Has a 20% chance to deal 100% increased damage.",resourceCost:15,baseDamage:25,baseHealing:0,rank:1,rankModifier:[1,1.75,2.15]},{id:7,name:"Venomous Vial",icon:"icons/spells/venomous_vial.png",description:"Throw a vial of poison at your target, dealing [d] damage.",secondaryDescription:null,resourceCost:25,baseDamage:30,baseHealing:0,rank:1,rankModifier:[1,1.55,2.25]},{id:8,name:"Incinerate",icon:"icons/spells/incinerate.png",description:"Set your target ablaze, dealing [d] damage.",secondaryDescription:"Has a 20% chance to deal 100% increased damage.",resourceCost:20,baseDamage:25,baseHealing:0,rank:1,rankModifier:[1,1.55,2.25]},{id:9,name:"Transfusion",icon:"icons/spells/transfusion.png",description:"Fuse your energy with the enemy, dealing [d] damage, and restoring [h] health points to you.",secondaryDescription:null,resourceCost:60,baseDamage:20,baseHealing:20,rank:1,rankModifier:[1,1.55,2.25]},{id:10,name:"Health Potion",icon:"icons/spells/health_potion.png",description:"Drink a health potion, restoring [h] health points.",secondaryDescription:null,resourceCost:0,baseDamage:0,baseHealing:20,rank:1,rankModifier:[1,2.5,4.5]}]),y=t(9),b=function(){function e(a){Object(c.a)(this,e),this._id=a.id,this._name=a.name,this._icon=a.icon,this._description=a.description,this._secondaryDescription=a.secondaryDescription,this._resourceCost=a.resourceCost,this._baseDamage=a.baseDamage,this._baseHealing=a.baseHealing,this._rank=a.rank,this._rankModifier=a.rankModifier}return Object(l.a)(e,[{key:"properties",get:function(){return{id:this._id,name:this._name,icon:this._icon,description:this._description,secondaryDescription:this._secondaryDescription,resourceCost:this._resourceCost,baseDamage:this._baseDamage,baseHealing:this._baseHealing,rank:this._rank,rankModifier:Object(y.a)(this._rankModifier)}}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"icon",get:function(){return this._icon}},{key:"resourceCost",get:function(){return this._resourceCost}},{key:"rankModifier",get:function(){return this._rankModifier}},{key:"description",get:function(){var e=this._description;return e=(e=e.replace(/\[d\]/g,"".concat(Math.floor(.9*this.damage),"-").concat(Math.floor(1.1*this.damage)))).replace(/\[h\]/g,"".concat(Math.floor(.9*this.healing),"-").concat(Math.floor(1.1*this.healing)))}},{key:"secondaryDescription",get:function(){return this._secondaryDescription}},{key:"damage",get:function(){return Math.floor(this._baseDamage*this.rankModifier[this._rank-1])}},{key:"healing",get:function(){return Math.floor(this._baseHealing*this.rankModifier[this._rank-1])}},{key:"rank",get:function(){return this._rank},set:function(e){this._rank=e}}]),e}(),k=[{id:0,name:"Warrior",description:"A warrior is a brutal and tough class, warriors have a high health pool and moderate damage.",icon:"icons/classes/warrior.png",resourceType:"Energy",healthModifier:1.9,resourceModifier:1,damageModifier:1.5,healingModifier:1,spells:[0,4,5,10]},{id:1,name:"Archer",description:"An archer is an agile and fast-paced class, archers have a moderate health pool and damage.",icon:"icons/classes/archer.png",resourceType:"Mana",healthModifier:1.5,resourceModifier:1.3,damageModifier:1.5,healingModifier:1.5,spells:[0,3,2,1]},{id:2,name:"Rogue",description:"A rogue is a silent but deadly class, rogues have a low health pool and high damage.",icon:"icons/classes/rogue.png",resourceType:"Energy",healthModifier:1.3,resourceModifier:1,damageModifier:1.8,healingModifier:1,spells:[0,6,7,10]},{id:3,name:"Wizard",description:"A wizard is an extremely dangerous class, wizards have a very low health pool and extremely high damage.",icon:"icons/classes/wizard.png",resourceType:"Mana",healthModifier:1,resourceModifier:1.8,damageModifier:2,healingModifier:2,spells:[0,8,9,1]}],N=function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(o.a)(this,Object(m.a)(a).call(this))).state={selectedId:0,characterName:"",nameError:!1,spells:[]},e.handleNameChange=e.handleNameChange.bind(Object(v.a)(Object(v.a)(e))),e}return Object(h.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=E.map(function(e){return new b(e)});this.setState({spells:e})}},{key:"selectClass",value:function(e){var a=this.getAvailableSpells(e.spells);this.props.dispatch(function(e,a,t,r){return{type:"SET_CLASS",selectedClass:e,spells:a,name:t,accountId:r}}(e,a,this.state.characterName,this.props.accountId))}},{key:"handleNameChange",value:function(e){var a=e.target.value;a.length<2?this.setState({nameError:!0}):a.match(/^[a-z]+$/i)?this.setState({characterName:a,nameError:!1}):this.setState({nameError:!0})}},{key:"getAvailableSpells",value:function(e){var a=this,t=[];return e.forEach(function(e){a.state.spells.forEach(function(a){a.id===e&&t.push(a)})}),t}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"newCharacter"},n.a.createElement("h3",null,"ChOOse A Name"),n.a.createElement("div",{className:"characterName"},n.a.createElement("input",{maxLength:"16",type:"text",placeholder:"Name",onChange:this.handleNameChange,className:this.state.nameError?"error":null}),this.state.nameError&&n.a.createElement("p",{className:"nameError"},"Your name must be between 2 and 16 characters and contain only letters.")),n.a.createElement("h3",{className:"classesHeader"},"Select yOUr Class"),n.a.createElement("div",{className:"classes"},k.map(function(a){return n.a.createElement("div",{key:a.id,className:e.state.selectedId===a.id?"classframe selected hoverable":"classframe hoverable",onClick:function(){return e.setState({selectedId:a.id})}},n.a.createElement("img",{className:"frame",src:"/images/classframe/classframe.png",alt:""}),n.a.createElement("img",{className:"frame_active",src:"/images/classframe/classframe_active.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+a.icon,alt:""}))})),n.a.createElement("div",{className:"classList"},k.map(function(a){return n.a.createElement("div",{className:e.state.selectedId===a.id?"class selected":"class",key:a.id},n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"classframe"},n.a.createElement("img",{className:"frame",src:"/images/classframe/classframe.png",alt:""}),n.a.createElement("img",{className:"frame_active",src:"/images/classframe/classframe_active.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+a.icon,alt:""})),n.a.createElement("h3",null,a.name)),n.a.createElement("p",{className:"description"},a.description),n.a.createElement("h4",null,"Spells"),n.a.createElement("div",{className:"spells"},e.getAvailableSpells(a.spells).map(function(e){return n.a.createElement("div",{key:e.id,className:"spell"},n.a.createElement("div",{className:"spellframe"},n.a.createElement("img",{className:"frame",src:"/images/spellframe/spellframe.png",alt:""}),n.a.createElement("img",{className:"frame_hover",src:"/images/spellframe/spellframe_hover.png",alt:""}),n.a.createElement("img",{className:"frame_clicked",src:"/images/spellframe/spellframe_clicked.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+e.icon,alt:""})),n.a.createElement("div",{className:"spellDescription"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("p",{className:"spellName"},e.name),0!==e.resourceCost&&n.a.createElement("p",{className:"resourceCost"},e.resourceCost," ",a.resourceType.toLowerCase())),n.a.createElement("p",null,"Rank ",e.rank)),n.a.createElement("p",null,e.description),e.secondaryDescription&&n.a.createElement("p",{className:"secondaryDescription"},e.secondaryDescription)))})),n.a.createElement("div",{className:"selectBtnContainer"},n.a.createElement("button",{className:"selectBtn",onClick:function(){return e.selectClass(a)},disabled:e.state.nameError||e.state.characterName.length<2}),(e.state.nameError||e.state.characterName.length<2)&&n.a.createElement("p",{className:"nameError"},"You must choose a valid name to continue.")))})))}}]),a}(r.Component),_=Object(u.b)(function(e){return{accountId:e.accountId}})(N),M=(t(37),function(){function e(a){Object(c.a)(this,e),this._id=a.id,this._name=a.name,this._icon=a.icon,this._description=a.description,this._healthModifier=a.healthModifier,this._resourceModifier=a.resourceModifier,this._damageModifier=a.damageModifier,this._healingModifier=a.healingModifier,this._cost=a.cost,this._requiredLevel=a.requiredLevel,this._availableClasses=a.availableClasses}return Object(l.a)(e,[{key:"properties",get:function(){return{id:this._id,name:this._name,icon:this._icon,description:this._description,healthModifier:this._healthModifier,resourceModifier:this._resourceModifier,damageModifier:this._damageModifier,healingModifier:this._healingModifier,cost:this._cost,requiredLevel:this._requiredLevel,availableClasses:Object(y.a)(this._availableClasses)}}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"icon",get:function(){return this._icon}},{key:"description",get:function(){var e=this._description;return e=(e=(e=(e=e.replace(/\[r\]/g,Math.floor(100*this.resourceModifier)-100)).replace(/\[hp\]/g,Math.floor(100*this.healthModifier)-100)).replace(/\[d\]/g,Math.floor(100*this.damageModifier)-100)).replace(/\[h\]/g,Math.floor(100*this.healingModifier)-100)}},{key:"healthModifier",get:function(){return this._healthModifier}},{key:"resourceModifier",get:function(){return this._resourceModifier}},{key:"damageModifier",get:function(){return this._damageModifier}},{key:"healingModifier",get:function(){return this._healingModifier}},{key:"cost",get:function(){return this._cost}},{key:"requiredLevel",get:function(){return this._requiredLevel}},{key:"availableClasses",get:function(){return this._availableClasses}}]),e}()),C={baseHealthPerLevel:[100,120,200,250,300,400,475,550,700,900,1200,1350,1500,1650,1900],baseResourcesPerLevel:[200,210,220,230,240,250,260,270,280,290,300,310,320,330,350],requiredExperience:[100,200,400,700,1e3,1400,1900,2500,2900,3700,4600,5500,7250,9e3]},w=function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(o.a)(this,Object(m.a)(a).call(this))).state={characters:[],loadingFinished:!1,errorOccured:!1},e}return Object(h.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/characters/get/"+this.props.accountId,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"get"}).then(function(a){a.json().then(function(a){(a=a.map(function(e){return e.spells=e.spells.map(function(e){return new b(e)}),e.equipment=e.equipment.map(function(e){return new M(e)}),e})).length>0?e.setState({characters:a,loadingFinished:!0,errorOccured:!1}):e.setState({status:"No characters found...",loadingFinished:!0,errorOccured:!1})})}).catch(function(a){e.setState({errorOccured:!0})})}},{key:"deleteFromDatabase",value:function(e,a){var t=this;fetch("/characters/delete/"+e,{method:"delete"}).then(function(r){r.json().then(function(r){if(e===t.props.character.uid)t.props.dispatch({type:"RESET_CHARACTER"});else{var n=Object(y.a)(t.state.characters);n.splice(a,1),t.setState({characters:n})}console.log(r)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"loadCharacter"},!this.state.loadingFinished&&!this.state.errorOccured&&n.a.createElement("p",null,"Loading characters..."),this.state.errorOccured&&n.a.createElement("p",null,"An error occured while loading characters..."),this.state.status&&n.a.createElement("p",null,this.state.status),this.state.characters.length>0&&n.a.createElement("div",{className:"characters"},this.state.characters.map(function(a,t){return n.a.createElement("div",{className:"character",key:a.uid},n.a.createElement("div",null,n.a.createElement("div",{className:"classframe"},n.a.createElement("img",{className:"frame",src:"/images/classframe/classframe.png",alt:""}),n.a.createElement("img",{className:"frame_active",src:"/images/classframe/classframe_active.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+a.class.icon,alt:""})),n.a.createElement("div",{className:"name"},n.a.createElement("h4",null,a.name),n.a.createElement("p",null,"Level ",a.level," ",n.a.createElement("span",null,a.class.name)))),n.a.createElement("div",{className:"info"},n.a.createElement("div",{className:"stats"},n.a.createElement("div",null,n.a.createElement("h5",null,"Health"),n.a.createElement("p",null,Math.round(a.equipment.reduce(function(e,a){return e*a.healthModifier},1)*a.class.healthModifier*C.baseHealthPerLevel[a.level-1]))),n.a.createElement("div",null,n.a.createElement("h5",null,a.class.resourceType),n.a.createElement("p",null,Math.round(a.equipment.reduce(function(e,a){return e*a.resourceModifier},1)*a.class.resourceModifier*C.baseResourcesPerLevel[a.level-1]))),n.a.createElement("div",null,n.a.createElement("h5",null,"Damage"),n.a.createElement("p",null,(a.equipment.reduce(function(e,a){return e*a.damageModifier},1)*a.class.damageModifier).toFixed(2),"x")),n.a.createElement("div",null,n.a.createElement("h5",null,"Healing"),n.a.createElement("p",null,(a.equipment.reduce(function(e,a){return e*a.healingModifier},1)*a.class.healingModifier).toFixed(2),"x"))),n.a.createElement("div",{className:"spells"},a.spells.map(function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("h5",null,e.name),n.a.createElement("div",{className:"spellRanks"},e.rankModifier.map(function(a,t){return n.a.createElement("div",{key:t,className:e.rank>t?"learned":"notLearned"})})))}))),n.a.createElement("div",{className:"actionButtons"},n.a.createElement("button",{className:"load",onClick:function(){return e.props.dispatch(d(a))}}),n.a.createElement("button",{className:"delete",onClick:function(){return e.deleteFromDatabase(a.uid,t)}})))})))}}]),a}(r.Component),O=Object(u.b)(function(e){return{character:e.character,accountId:e.accountId}})(w),R=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).state={view:"",refresh:t.props.refresh},t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"componentWillUpdate",value:function(e){e.refresh!==this.props.refresh&&this.setState({view:""})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"characterCreation"},""===this.state.view&&n.a.createElement("div",{className:"select"},n.a.createElement("div",{onClick:function(){return e.setState({view:"CREATE"})}},n.a.createElement("h3",null,"Create New")),n.a.createElement("div",{className:"or"},n.a.createElement("h1",null,"OR")),n.a.createElement("div",{onClick:function(){return e.setState({view:"SAVED"})}},n.a.createElement("h3",null,"Load Existing"))),"CREATE"===this.state.view&&n.a.createElement(_,null),"SAVED"===this.state.view&&n.a.createElement(O,null))}}]),a}(r.Component),S=Object(u.b)(function(e){return{classes:e.classes,spells:e.spells,refresh:e.navigation.refresh}})(R),L=(t(39),function(e){function a(){return Object(c.a)(this,a),Object(o.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{id:"credits"},n.a.createElement("div",null,n.a.createElement("h2",null,"Special thanks to"),n.a.createElement("p",null,"Delapouite (",n.a.createElement("a",{href:"https://delapouite.com"},"https://delapouite.com"),"), Wjb (",n.a.createElement("a",{href:"http://wjbstories.blogspot.com"},"http://wjbstories.blogspot.com"),") and Lorc (",n.a.createElement("a",{href:"http://lorcblog.blogspot.com"},"http://lorcblog.blogspot.com"),") from ",n.a.createElement("a",{href:"https://game-icons.net"},"https://game-icons.net")," for the icons")))}}]),a}(r.Component)),A=(t(41),function(e){function a(){return Object(c.a)(this,a),Object(o.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"character"},n.a.createElement("div",{className:"class"},n.a.createElement("h3",null,this.props.character.name),n.a.createElement("div",{className:"classframe"},n.a.createElement("img",{className:"frame",src:"/images/classframe/classframe.png",alt:""}),n.a.createElement("img",{className:"frame_active",src:"/images/classframe/classframe_active.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+this.props.character.class.icon,alt:""})),n.a.createElement("h3",null,"Level ",this.props.character.level)),n.a.createElement("h4",{className:"className"},this.props.character.class.name),n.a.createElement("div",{className:"stats"},n.a.createElement("div",null,n.a.createElement("h5",null,"Health"),n.a.createElement("p",null,Math.round(this.props.character.equipment.reduce(function(e,a){return e*a.healthModifier},1)*this.props.character.class.healthModifier*C.baseHealthPerLevel[this.props.character.level-1]))),n.a.createElement("div",null,n.a.createElement("h5",null,this.props.character.class.resourceType),n.a.createElement("p",null,Math.round(this.props.character.equipment.reduce(function(e,a){return e*a.resourceModifier},1)*this.props.character.class.resourceModifier*C.baseResourcesPerLevel[this.props.character.level-1]))),n.a.createElement("div",null,n.a.createElement("h5",null,"Damage"),n.a.createElement("p",null,(this.props.character.equipment.reduce(function(e,a){return e*a.damageModifier},1)*this.props.character.class.damageModifier).toFixed(2),"x")),n.a.createElement("div",null,n.a.createElement("h5",null,"Healing"),n.a.createElement("p",null,(this.props.character.equipment.reduce(function(e,a){return e*a.healingModifier},1)*this.props.character.class.healingModifier).toFixed(2),"x"))),n.a.createElement("h4",{className:"spellsHeader"},"Spells"),n.a.createElement("div",{className:"spells"},this.props.character.spells.map(function(a){return n.a.createElement("div",{key:a.id,className:"spell"},n.a.createElement("div",{className:"spellframe"},n.a.createElement("img",{className:"frame",src:"/images/spellframe/spellframe.png",alt:""}),n.a.createElement("img",{className:"frame_hover",src:"/images/spellframe/spellframe_hover.png",alt:""}),n.a.createElement("img",{className:"frame_clicked",src:"/images/spellframe/spellframe_clicked.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+a.icon,alt:""})),n.a.createElement("div",{className:"spellDescription"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("p",{className:"spellName"},a.name),0!==a.resourceCost&&n.a.createElement("p",{className:"resourceCost"},a.resourceCost," ",e.props.character.class.resourceType.toLowerCase())),n.a.createElement("p",null,"Rank ",a.rank)),n.a.createElement("p",null,a.description),a.secondaryDescription&&n.a.createElement("p",{className:"secondaryDescription"},a.secondaryDescription)),n.a.createElement("div",{className:"spellRanks"},a.rankModifier.map(function(e,t){return n.a.createElement("div",{key:t,className:a.rank>t?"learned":"notLearned"})})))})),n.a.createElement("h4",{className:"equipmentHeader"},"Equipment"),n.a.createElement("div",{className:"equipment"},0===this.props.character.equipment.length?n.a.createElement("p",null,"You have not purchased any equipment."):this.props.character.equipment.map(function(e){return n.a.createElement("div",{key:e.id,className:"item"},n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"spellframe"},n.a.createElement("img",{className:"frame",src:"/images/spellframe/spellframe.png",alt:""}),n.a.createElement("img",{className:"frame_hover",src:"/images/spellframe/spellframe_hover.png",alt:""}),n.a.createElement("img",{className:"frame_clicked",src:"/images/spellframe/spellframe_clicked.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+e.icon,alt:""})),n.a.createElement("h4",null,e.name)),n.a.createElement("p",{className:"description"},e.description))})))}}]),a}(r.Component)),H=Object(u.b)(function(e){return{character:e.character,accountId:e.accountId}})(A),I=function(){function e(a,t,r,n){var s=this;Object(c.a)(this,e),this.maxHealth=t[a.level-1]*a.class.healthModifier,this.maxResources=r[a.level-1]*a.class.resourceModifier,this.damageModifier=a.class.damageModifier,this.healingModifier=a.class.healingModifier,this.icon=a.class.icon,this.name=a.name,this.spells=a.spells,this.equipment=a.equipment,this.resourceType=a.class.resourceType,this.className=a.class.name,this.experience=a.experience,this.experienceToNextLevel=n,this.level=a.level,a.equipment.forEach(function(e){s.damageModifier*=e.damageModifier,s.healingModifier*=e.healingModifier,s.maxHealth*=e.healthModifier,s.maxResources*=e.resourceModifier}),this.currentHealth=this.maxHealth,this.currentResources=this.maxResources}return Object(l.a)(e,[{key:"attack",value:function(e){var a=this.spells[e],t=(Math.floor(21*Math.random())+90)/100;if(this.currentResources>=a.resourceCost){this.currentResources-=a.resourceCost;var r=Math.floor(a.damage*this.damageModifier*t),n=Math.floor(a.healing*this.healingModifier*t),s=!1;if(0===e)this.receiveResources(.1*this.maxResources);else if(1===e){var i=Math.random();i>=0&&i<=.2&&(r*=2,s=!0)}return[r,n,s]}return[0,0]}},{key:"receiveAttack",value:function(e){this.currentHealth-e<=0?this.currentHealth=0:this.currentHealth-=e}},{key:"receiveHeal",value:function(e){this.currentHealth+e>=this.maxHealth?this.currentHealth=this.maxHealth:this.currentHealth+=e}},{key:"receiveResources",value:function(e){this.currentResources+e>=this.maxResources?this.currentResources=this.maxResources:this.currentResources+=e}},{key:"getMaxHealth",get:function(){return this.maxHealth}},{key:"getRemainingHealth",get:function(){return this.currentHealth}},{key:"getRemainingHealthPercentage",get:function(){return this.currentHealth/this.maxHealth*100}},{key:"getMaxResources",get:function(){return this.maxResources}},{key:"getRemainingResources",get:function(){return this.currentResources}},{key:"getRemainingResourcesPercentage",get:function(){return this.currentResources/this.maxResources*100}},{key:"getName",get:function(){return this.name}},{key:"getLevel",get:function(){return this.level}},{key:"getIcon",get:function(){return this.icon}},{key:"getResourceType",get:function(){return this.resourceType}},{key:"getClass",get:function(){return this.className}},{key:"getExperience",get:function(){return this.experience}},{key:"getExperienceToNextLevel",get:function(){return this.experienceToNextLevel}},{key:"getSpells",get:function(){return this.spells}}]),e}(),x=function(){function e(a,t){Object(c.a)(this,e),this.maxHealth=t[a.level-1]*a.healthModifier,this.currentHealth=this.maxHealth,this.damageModifier=a.damageModifier,this.icon=a.icon,this.name=a.name,this.level=a.level}return Object(l.a)(e,[{key:"attack",value:function(){return[Math.floor(50*this.damageModifier*(Math.floor(21*Math.random())+90)/100),0]}},{key:"receiveAttack",value:function(e){this.currentHealth-e<=0?this.currentHealth=0:this.currentHealth-=e}},{key:"getMaxHealth",get:function(){return this.maxHealth}},{key:"getRemainingHealth",get:function(){return this.currentHealth}},{key:"getRemainingHealthPercentage",get:function(){return this.currentHealth/this.maxHealth*100}},{key:"getName",get:function(){return this.name}},{key:"getLevel",get:function(){return this.level}},{key:"getIcon",get:function(){return this.icon}}]),e}(),q=[{id:0,name:"Evil Imp",icon:"icons/enemies/evil_imp.png",level:1,healthModifier:1,damageModifier:1},{id:1,name:"Twin Hydras",icon:"icons/enemies/twin_hydras.png",level:2,healthModifier:1.25,damageModifier:.85},{id:2,name:"Gnarly Goblin",icon:"icons/enemies/gnarly_goblin.png",level:4,healthModifier:1.5,damageModifier:.7},{id:3,name:"Spark Spirit",icon:"icons/enemies/spark_spirit.png",level:6,healthModifier:1,damageModifier:1.7},{id:4,name:"Greater Demon",icon:"icons/enemies/greater_demon.png",level:8,healthModifier:2.1,damageModifier:1.9},{id:5,name:"The Beast",icon:"icons/enemies/the_beast.png",level:10,healthModifier:2.5,damageModifier:3}],j=(t(43),function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(o.a)(this,Object(m.a)(a).call(this))).state={arenaLevel:1,playerTurn:!0,latestAction:"Your Venomous Vial hit Enemy for 40 damage.",showLatestAction:!1,player:null,enemy:null,status:"WAITING",loot:{experience:0,coins:0}},e}return Object(h.a)(a,e),Object(l.a)(a,[{key:"startArena",value:function(){var e=this,a=new x(q[this.state.arenaLevel-1],C.baseHealthPerLevel),t=new I(this.props.character,C.baseHealthPerLevel,C.baseResourcesPerLevel,C.requiredExperience[this.props.character.level-1]);this.setState({enemy:a,player:t},function(){e.addSpellEventListeners(),e.setState({status:"INPROGRESS"})})}},{key:"checkForWinner",value:function(){return this.state.enemy.getRemainingHealth<=0?(this.distributeLoot(),!0):this.state.player.getRemainingHealth<=0&&(this.setState({status:"LOSER"}),!0)}},{key:"distributeLoot",value:function(){var e=this;if(0===this.state.loot.experience&&0===this.state.loot.coins){var a=Math.floor(50*this.state.enemy.getLevel*((Math.floor(50*Math.random())+75)/100)),t=Math.floor(15*this.state.enemy.getLevel*((Math.floor(50*Math.random())+75)/100));this.setState({loot:{experience:a,coins:t},status:"WINNER"},function(){e.props.dispatch(function(e,a,t){return{type:"GIVE_LOOT",experience:e,coins:a,accountId:t}}(a,t,e.props.accountId))})}}},{key:"resetArena",value:function(){var e=this;this.setState({playerTurn:!0,showLatestAction:!1,arenaLevel:1},function(){e.startArena()})}},{key:"startNextLevel",value:function(){var e=this,a=this.state.arenaLevel+1;this.setState({playerTurn:!0,showLatestAction:!1,arenaLevel:a,loot:{experience:0,coins:0}},function(){e.startArena()})}},{key:"handlePlayerAttack",value:function(e){var a=this;if(!this.checkForWinner()&&"INPROGRESS"===this.state.status){if(!this.state.playerTurn)return;var t,r=this.state.player.attack(e),n=r[0],s=r[1],i=r[2];if(n>0&&s>0)t="Your ".concat(this.state.player.getSpells[e].name," hit ").concat(this.state.enemy.getName," for ").concat(n," damage and restored \n                ").concat(s," health points to you");else if(n>0)t="Your ".concat(this.state.player.getSpells[e].name," ").concat(i?"critically":""," hit ").concat(this.state.enemy.getName," for ").concat(n," damage");else{if(!(s>0))return;t="Your ".concat(this.state.player.getSpells[e].name," healed you ").concat(s," health points")}this.setState({playerTurn:!1}),this.state.enemy.receiveAttack(n),this.state.player.receiveHeal(s),this.setState({showLatestAction:!0,latestAction:t}),window.setTimeout(function(){a.setState({showLatestAction:!1}),a.handleEnemyAttack()},2e3)}}},{key:"handleEnemyAttack",value:function(){var e=this;if(!this.checkForWinner()&&"INPROGRESS"===this.state.status){var a=this.state.enemy.attack()[0],t="".concat(this.state.enemy.getName," hit you for ").concat(a," damage");this.state.player.receiveAttack(a),this.setState({showLatestAction:!0,latestAction:t}),window.setTimeout(function(){e.setState({showLatestAction:!1,playerTurn:!0}),e.checkForWinner()},2e3)}}},{key:"addSpellEventListeners",value:function(){var e=this;window.addEventListener("keydown",function(e){var a=document.getElementById("spells");if("1"===e.key){var t=a.children[0].children[0];if(t.classList.contains("disabled"))return;t.classList.add("clicked")}else if("2"===e.key){var r=a.children[1].children[0];if(r.classList.contains("disabled"))return;r.classList.add("clicked")}else if("3"===e.key){var n=a.children[2].children[0];if(n.classList.contains("disabled"))return;n.classList.add("clicked")}else if("4"===e.key){var s=a.children[3].children[0];if(s.classList.contains("disabled"))return;s.classList.add("clicked")}}),window.addEventListener("keyup",function(a){var t=document.getElementById("spells");if("1"===a.key){var r=t.children[0].children[0];if(r.classList.contains("disabled"))return;r.classList.remove("clicked"),e.handlePlayerAttack(0)}else if("2"===a.key){var n=t.children[1].children[0];if(n.classList.contains("disabled"))return;n.classList.remove("clicked"),e.handlePlayerAttack(1)}else if("3"===a.key){var s=t.children[2].children[0];if(s.classList.contains("disabled"))return;s.classList.remove("clicked"),e.handlePlayerAttack(2)}else if("4"===a.key){var i=t.children[3].children[0];if(i.classList.contains("disabled"))return;i.classList.remove("clicked"),e.handlePlayerAttack(3)}})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"arena"},"WAITING"===this.state.status&&n.a.createElement("div",{className:"introduction"},n.a.createElement("h2",null,"The Arena"),n.a.createElement("p",null,"Welcome, ",this.props.character.name,".",n.a.createElement("br",null),"The arena consists of 6 stages. For each stage you complete you will be facing a tougher enemy. Should an enemy prove too difficult of a challenge, spell and armor upgrades can be bought in the shop. Beat the 6th and final enemy to prove your worth.",n.a.createElement("br",null),n.a.createElement("br",null),"Whenever you're ready, hit the button below to fight your first enemy."),n.a.createElement("div",null,n.a.createElement("button",{className:"startBtn",onClick:function(){return e.startArena()}}))),"WAITING"!==this.state.status&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"enemyFrame"},n.a.createElement("div",{className:"enemy"},n.a.createElement("div",{className:"enemyProfile"},n.a.createElement("div",{className:"enemyUnitFrame"},n.a.createElement("img",{className:"frame",src:"/images/classframe/classframe_active.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+this.state.enemy.getIcon,alt:""})),n.a.createElement("h3",{className:"enemyName"},this.state.enemy.getName)),n.a.createElement("div",{className:"levelIndicatorFrame"},n.a.createElement("img",{className:"container",src:"/images/level_indicator_container.png",alt:""}),[0,1,2,3,4,5].map(function(a){var t={left:32*a+3+"px"};return n.a.createElement("img",{key:a,style:t,className:e.state.arenaLevel>a?"indicator":"indicator hidden",src:"/images/level_indicator.png",alt:""})}))),n.a.createElement("div",{className:"resourcebar"},n.a.createElement("p",{className:"level"},"Level ",this.state.enemy.getLevel),n.a.createElement("p",{className:"health"},Math.floor(this.state.enemy.getRemainingHealth),"/",Math.floor(this.state.enemy.getMaxHealth)," HP"),n.a.createElement("img",{className:"frame",src:"/images/resourceframe/bar_frame.png",alt:""}),n.a.createElement("div",{style:{width:4.94*this.state.enemy.getRemainingHealthPercentage+"px"},className:"frame_filler_health"}))),n.a.createElement("div",{className:"statusFrame"},!this.state.showLatestAction&&"INPROGRESS"===this.state.status&&n.a.createElement("h3",null,"It Is Your Turn!"),this.state.showLatestAction&&"INPROGRESS"===this.state.status&&n.a.createElement("h4",null,this.state.latestAction),"WINNER"===this.state.status&&n.a.createElement("div",null,n.a.createElement("h2",null,"Victory"),n.a.createElement("div",{className:"loot"},n.a.createElement("h5",null,"Rewards"),n.a.createElement("p",{className:"expGain"},"+",this.state.loot.experience," experience"),n.a.createElement("p",{className:"coinGain"},"+",this.state.loot.coins," ",n.a.createElement("img",{className:"coin",src:"/images/icons/coin.png",alt:""}))),6!==this.state.arenaLevel&&n.a.createElement("button",{className:"continueBtn",onClick:function(){return e.startNextLevel()}}),6===this.state.arenaLevel&&n.a.createElement("h3",null,"Congratulations hero, You beat the final enemy!")),"LOSER"===this.state.status&&n.a.createElement("div",null,n.a.createElement("h2",null,"Defeat"),n.a.createElement("button",{className:"restartBtn",onClick:function(){return e.resetArena()}}))),n.a.createElement("div",{className:"playerFrame"},n.a.createElement("div",{id:"spells"},this.state.player.getSpells.map(function(a,t){return n.a.createElement("div",{key:a.id,className:"spell",onClick:function(){return e.handlePlayerAttack(t)}},n.a.createElement("div",{className:e.state.playerTurn&&e.state.player.getRemainingResources>=a.resourceCost?"spellframe clickable":"spellframe disabled"},n.a.createElement("p",{className:"bind"},t+1),n.a.createElement("img",{className:"frame",src:"/images/spellframe/spellframe.png",alt:""}),n.a.createElement("img",{className:"frame_hover",src:"/images/spellframe/spellframe_hover.png",alt:""}),n.a.createElement("img",{className:"frame_clicked",src:"/images/spellframe/spellframe_clicked.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+a.icon,alt:""})),n.a.createElement("div",{className:"spellDescription"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("p",{className:"spellName"},a.name),0!==a.resourceCost&&n.a.createElement("p",{className:a.resourceCost>e.state.player.getRemainingResources?"resourceCost lowMana":"resourceCost"},a.resourceCost," ",e.state.player.getResourceType)),n.a.createElement("p",null,"Rank ",a.rank)),n.a.createElement("p",null,a.description),a.secondaryDescription&&n.a.createElement("p",{className:"secondaryDescription"},a.secondaryDescription)))})),n.a.createElement("div",{className:"resourcebar"},n.a.createElement("div",{className:"playerInfo"},n.a.createElement("div",null,n.a.createElement("h4",null,this.state.player.getName),n.a.createElement("div",{className:"playerCoins"},n.a.createElement("img",{className:"coin",src:"/images/icons/coin.png",alt:""}),n.a.createElement("p",null,this.props.character.coins))),n.a.createElement("div",null,n.a.createElement("p",null,"Level ",this.state.player.getLevel," ",n.a.createElement("span",null,this.state.player.getClass)),n.a.createElement("p",null,Math.floor(this.state.player.getRemainingHealth),"/",Math.floor(this.state.player.getMaxHealth)," HP"),n.a.createElement("p",null,Math.floor(this.state.player.getRemainingResources),"/",Math.floor(this.state.player.getMaxResources)," ",this.state.player.getResourceType))),n.a.createElement("img",{className:"frame",src:"/images/resourceframe/bar_frame.png",alt:""}),n.a.createElement("div",{style:{width:4.94*this.state.player.getRemainingHealthPercentage+"px"},className:"frame_filler_health"})),n.a.createElement("div",{className:"resourcebar"},n.a.createElement("img",{className:"frame",src:"/images/resourceframe/bar_frame.png",alt:""}),n.a.createElement("div",{style:{width:4.94*this.state.player.getRemainingResourcesPercentage+"px"},className:"frame_filler_"+this.state.player.getResourceType.toLowerCase()})),n.a.createElement("div",{className:"resourcebar"},n.a.createElement("div",{className:"playerExp"},15===this.props.character.level&&n.a.createElement("p",null,"Max Level"),this.props.character.level<15&&n.a.createElement("p",null,this.props.character.experience,"/",C.requiredExperience[this.props.character.level-1]," Experience"),this.props.character.level<15&&n.a.createElement("p",null,C.requiredExperience[this.props.character.level-1]-this.props.character.experience," exp to level ",this.props.character.level+1)),n.a.createElement("img",{className:"frame",src:"/images/resourceframe/bar_frame.png",alt:""}),this.props.character.level<15&&n.a.createElement("div",{style:{width:this.props.character.experience/C.requiredExperience[this.props.character.level-1]*494+"px"},className:"frame_filler_experience"})))))}}]),a}(r.Component)),T=Object(u.b)(function(e){return{accountId:e.accountId,character:e.character}})(j),D=(t(45),[{id:0,name:"Scroll Of Knowledge",description:"Increases your max resources by [r]%.",icon:"icons/equipment/scroll_of_knowledge.png",healthModifier:1,resourceModifier:1.2,damageModifier:1,healingModifier:1,cost:100,requiredLevel:3,availableClasses:[3]},{id:1,name:"Robe of Wizardry",description:"Increases your damage by [d]%, healing by [h]% and health by [hp]%.",icon:"icons/equipment/robe_of_wizardry.png",healthModifier:1.15,resourceModifier:1,damageModifier:1.175,healingModifier:1.15,cost:300,requiredLevel:4,availableClasses:[1,3]},{id:2,name:"Hat of Wizardry",description:"Increases your damage and healing by [d]%.",icon:"icons/equipment/hat_of_wizardry.png",healthModifier:1,resourceModifier:1,damageModifier:1.25,healingModifier:1.25,cost:250,requiredLevel:2,availableClasses:[1,3]},{id:3,name:"Azariah's Chain of Vitality",description:"Increases your health by [hp]%.",icon:"icons/equipment/azariahs_chain_of_vitality.png",healthModifier:1.35,resourceModifier:1,damageModifier:1,healingModifier:1,cost:200,requiredLevel:4,availableClasses:[0,1,2]},{id:4,name:"Bulwark",description:"Increases your health by [hp]%.",icon:"icons/equipment/bulwark.png",healthModifier:1.2,resourceModifier:1,damageModifier:1,healingModifier:1,cost:100,requiredLevel:2,availableClasses:[0,2]},{id:5,name:"Chainmail of Endurance",description:"Increases your damage by [d]% and health by [hp]%.",icon:"icons/equipment/chainmail_of_endurance.png",healthModifier:1.5,resourceModifier:1,damageModifier:1.25,healingModifier:1,cost:400,requiredLevel:6,availableClasses:[0,2]},{id:6,name:"Elven Headguard",description:"Increases your damage, healing and health by [d]%.",icon:"icons/equipment/elven_headguard.png",healthModifier:1.25,resourceModifier:1,damageModifier:1.25,healingModifier:1.25,cost:500,requiredLevel:8,availableClasses:[1,2]},{id:7,name:"Jeweled Chalice",description:"Increases your damage, healing and health by [d]%.",icon:"icons/equipment/jeweled_chalice.png",healthModifier:1.25,resourceModifier:1,damageModifier:1.25,healingModifier:1.25,cost:500,requiredLevel:8,availableClasses:[1,2,3]},{id:8,name:"Signet of Death",description:"Increases your damage by [d]%.",icon:"icons/equipment/signet_of_death.png",healthModifier:1,resourceModifier:1,damageModifier:1.4,healingModifier:1,cost:700,requiredLevel:10,availableClasses:[0,1,2]},{id:9,name:"Tribal Pendant",description:"Increases your healing by [h]%.",icon:"icons/equipment/tribal_pendant.png",healthModifier:1,resourceModifier:1,damageModifier:1,healingModifier:1.6,cost:700,requiredLevel:10,availableClasses:[0,2]}]),P=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).state={view:"equipment",equipment:[]},t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e;e=D.map(function(e){return new M(e)}),this.setState({equipment:e})}},{key:"characterHasItem",value:function(e){return this.props.character.equipment.find(function(a){return a.id===e})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"store"},n.a.createElement("div",{className:"sidebar"},n.a.createElement("h3",null,"Shop ","spells"===this.state.view?"Spells":"Equipment"),n.a.createElement("div",null,n.a.createElement("img",{className:"coin",src:"/images/icons/coin.png",alt:""}),n.a.createElement("p",null,this.props.character.coins)),n.a.createElement("button",{className:"equipment"===this.state.view?"active equipmentBtn":"equipmentBtn",onClick:function(){e.setState({view:"equipment"})}}),n.a.createElement("button",{className:"spells"===this.state.view?"active spellsBtn":"spellsBtn",onClick:function(){e.setState({view:"spells"})}})),"equipment"===this.state.view&&n.a.createElement("div",{className:"items"},this.state.equipment.sort(function(e,a){return e.requiredLevel>a.requiredLevel?1:a.requiredLevel>e.requiredLevel?-1:0}).map(function(a){return a.availableClasses.includes(e.props.character.class.id)?n.a.createElement("div",{key:a.id,className:e.characterHasItem(a.id)?"itemContainer owned":"itemContainer"},n.a.createElement("div",null,n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"spellframe"},n.a.createElement("img",{className:"frame",src:"/images/spellframe/spellframe.png",alt:""}),n.a.createElement("img",{className:"frame_hover",src:"/images/spellframe/spellframe_hover.png",alt:""}),n.a.createElement("img",{className:"frame_clicked",src:"/images/spellframe/spellframe_clicked.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+a.icon,alt:""})),n.a.createElement("h4",null,a.name)),n.a.createElement("p",{className:"description"},e.characterHasItem(a.id)?"You already own this item.":a.description)),n.a.createElement("div",{className:e.props.character.level<a.requiredLevel||e.props.character.coins<a.cost?"buyItem disabled":"buyItem"},n.a.createElement("div",{className:"itemInfo"},n.a.createElement("p",{className:e.props.character.level<a.requiredLevel?"lowLevel":null},"Level ",a.requiredLevel,"+"),n.a.createElement("h5",{className:"coinContainer"},"Cost: ",n.a.createElement("img",{className:"coin",src:"/images/icons/coin.png",alt:""})," ",n.a.createElement("span",{className:e.props.character.coins<a.cost?"lowCoins":null},a.cost))),n.a.createElement("button",{className:"buyBtn",onClick:function(){e.characterHasItem(a)||e.props.dispatch(function(e,a){return{type:"PURCHASE_ITEM",item:e,accountId:a}}(a,e.props.accountId))}}))):null})),"spells"===this.state.view&&n.a.createElement("div",{className:"spells"},this.props.character.spells.map(function(a,t){var r=new b(a.properties);return r.rank<3&&(r.rank=r.rank+1),n.a.createElement("div",{key:r.id,className:3===a.rank?"spellContainer owned":"spellContainer"},n.a.createElement("div",null,n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"spellframe"},n.a.createElement("img",{className:"frame",src:"/images/spellframe/spellframe.png",alt:""}),n.a.createElement("img",{className:"frame_hover",src:"/images/spellframe/spellframe_hover.png",alt:""}),n.a.createElement("img",{className:"frame_clicked",src:"/images/spellframe/spellframe_clicked.png",alt:""}),n.a.createElement("img",{className:"frame_icon",src:"/images/"+r.icon,alt:""})),n.a.createElement("h4",null,r.name)),n.a.createElement("p",{className:"description"},3===a.rank?"You have already upgraded this spell to the highest rank.":r.description),r.secondaryDescription&&n.a.createElement("p",{className:"secondaryDescription"},r.secondaryDescription)),n.a.createElement("div",{className:e.props.character.coins<100*r.rank?"buyItem disabled":"buyItem"},n.a.createElement("div",{className:"itemInfo"},3===a.rank?n.a.createElement("p",null,"Max Rank"):n.a.createElement("p",null,"Buy Rank ",r.rank," / 3"),n.a.createElement("h5",{className:"coinContainer"},"Cost: ",n.a.createElement("img",{className:"coin",src:"/images/icons/coin.png",alt:""})," ",n.a.createElement("span",{className:e.props.character.coins<100*r.rank?"lowCoins":null},100*r.rank))),n.a.createElement("button",{className:"upgradeBtn",onClick:function(){var n,s,i,c;a.rank<3&&e.props.dispatch((n=t,s=100*r.rank,i=r.properties,c=e.props.accountId,{type:"UPGRADE_SPELL",spellIndex:n,cost:s,newSpell:i,accountId:c}))}})))})))}}]),a}(r.Component),W=Object(u.b)(function(e){return{character:e.character,equipment:e.equipment,spells:e.spells,accountId:e.accountId}})(P),F=(t(47),function(e){function a(){return Object(c.a)(this,a),Object(o.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(l.a)(a,[{key:"storageAvailable",value:function(e){try{var a=window[e],t="__storage_test__";return a.setItem(t,t),a.removeItem(t),!0}catch(r){return r instanceof DOMException&&(22===r.code||1014===r.code||"QuotaExceededError"===r.name||"NS_ERROR_DOM_QUOTA_REACHED"===r.name)&&0!==a.length}}},{key:"getCachedCharacter",value:function(){var e=JSON.parse(localStorage.getItem("character"));e&&(e.spells=e.spells.map(function(e){return new b(e)}),e.equipment=e.equipment.map(function(e){return new M(e)}),this.props.dispatch(d(e,!0)))}},{key:"componentDidMount",value:function(){if(this.storageAvailable("localStorage")){this.getCachedCharacter();var e=localStorage.getItem("accountId");e?this.props.dispatch(p(e)):this.props.dispatch(p())}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"app"},n.a.createElement(g,null),this.props.navigation.showIntroduction&&n.a.createElement("div",{className:"introduction"},n.a.createElement("h2",null,"Welcome, adventurer!"),n.a.createElement("p",null,"This is the arena. A web-based fighting game where you can create a character and use it to fight enemies in one-versus-one combat. Shall you win, you will be rewarded with experience points as well as coins, which you can use to purchase upgraded spells and abilities.",n.a.createElement("br",null),n.a.createElement("br",null),"Ready to create your character?"),n.a.createElement("div",null,n.a.createElement("button",{className:"createBtn",onClick:function(){return e.props.dispatch({type:"SHOW_CHARACTER_CREATION"})}}))),this.props.navigation.showCharacterCreation&&n.a.createElement(S,null),this.props.navigation.showCredits&&n.a.createElement(L,null),this.props.navigation.showCharacter&&n.a.createElement(H,null),this.props.navigation.showArena&&n.a.createElement(T,null),this.props.navigation.showStore&&n.a.createElement(W,null))}}]),a}(r.Component)),B=Object(u.b)(function(e){return{navigation:e.navigation,character:e.character}})(F),G=t(8),z=t(14),U=t(49);function V(e){var a={class:e.class,name:e.name,level:e.level,coins:e.coins,experience:e.experience,uid:e.uid};a.spells=e.spells.map(function(e){return e.properties}),a.equipment=e.equipment.map(function(e){return e.properties}),localStorage.setItem("character",JSON.stringify(a))}function Y(e,a){var t=Object(z.a)({},e,{accountId:a});t.spells=e.spells.map(function(e){return e.properties}),t.equipment=e.equipment.map(function(e){return e.properties}),fetch("/characters/save",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify(t)}).then(function(e){e.json().then(function(e){console.log(e)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}var J=Object(G.b)({character:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=Object(z.a)({},e);switch(a.type){case"SET_CLASS":return t.class=a.selectedClass,t.spells=a.spells,t.equipment=[],t.name=a.name,t.level=1,t.coins=0,t.experience=0,t.uid=U(),V(t),Y(t,a.accountId),t;case"GIVE_LOOT":return t.experience+=a.experience,t.coins+=a.coins,15===t.level?t.experience=0:t.experience>C.requiredExperience[t.level-1]&&(t.level+=1,15===t.level&&(t.experience=0),t.experience-=C.requiredExperience[t.level-2]),V(t),Y(t,a.accountId),t;case"UPGRADE_SPELL":return t.coins>=a.cost&&(t.spells[a.spellIndex]=new b(a.newSpell),t.coins-=a.cost),V(t),Y(t,a.accountId),t;case"PURCHASE_ITEM":return t.coins>=a.item.cost&&(t.equipment.push(a.item),t.coins-=a.item.cost),V(t),Y(t,a.accountId),t;case"LOAD_CHARACTER":return!0!==a.cached&&V(a.character),t=a.character;case"RESET_CHARACTER":return t={class:null,coins:0,level:1,experience:0,spells:[],equipment:[],name:"",uid:null},localStorage.removeItem("character"),t;default:return e}},navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t={showCharacterCreation:!1,showCredits:!1,showArena:!1,showCharacter:!1,showIntroduction:!1,refresh:!e.refresh};switch(a.type){case"SHOW_CHARACTER_CREATION":return t.showCharacterCreation=!0,t;case"SHOW_CREDITS":return t.showCredits=!0,t;case"SHOW_ARENA":return t.showArena=!0,t;case"SHOW_STORE":return t.showStore=!0,t;case"SHOW_CHARACTER":return t.showCharacter=!0,t;case"RESET_CHARACTER":return t.showIntroduction=!0,t;case"LOAD_CHARACTER":case"SET_CLASS":return t.showCharacter=!0,t;default:return e}},accountId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ACCOUNT_ID":return a.accountId?e=a.accountId:(e=U(),localStorage.setItem("accountId",e)),e;default:return e}}}),X={navigation:{showIntroduction:!0,showCharacterCreation:!1,showCredits:!1,showStore:!1,showArena:!1,showCharacter:!1,refresh:!1},character:{class:null,coins:0,level:1,experience:0,spells:[],equipment:[],name:"",uid:null},accountId:null},Q=Object(G.c)(J,X,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(n.a.createElement(u.a,{store:Q},n.a.createElement(B,null)),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.7fd28db8.chunk.js.map